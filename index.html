<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†–∞–±–æ—á–∏–π –¥–µ–Ω—å –≤ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∏</title>
  <style>
    body { font-family: sans-serif; background: #e2e7ed; margin:0; }
    #header {background:#2a5b9d;color:#fff;padding:16px 25px 8px 25px;}
    #top-bar {display:flex;justify-content:space-between;align-items:center;padding:10px;background:#f8fafc;}
    #stress, #inventory { margin: 0 22px 0 0; display:inline-block;}
    #main-wrap{display:flex;justify-content:center;}
    #map {
      display: grid; grid-template-columns: repeat(4, 150px);
      grid-template-rows: repeat(3, 106px); gap: 8px; margin:0 auto;
      background: #e7edf6; padding:15px; border-radius: 14px;
    }
    .room {
      background: #f3f5fa;
      border: 1.5px solid #b5bac4;
      border-radius: 12px;
      min-height: 90px; position:relative;
      padding:5px 8px 5px 8px; box-sizing:border-box;
      transition:box-shadow 0.2s;
    }
    .room.active {box-shadow: 0 0 8px #41b7fc88;}
    .room .room-title {font-weight:700; font-size:1.03em; margin-bottom:5px;}
    .room .doors {font-size:11px; color:#769;}
    .actors {margin-top:7px;min-height:22px;}
    .actor {display:inline-block; margin-right:8px; text-align:center;}
    .actor-ego {border:2px solid #278ae6; border-radius:6px; background:#cef7ffaa;}
    .actor-npc {border-radius:6px; padding:0 1px;}
    .actor-name {display:block;font-size:10px;color:#568;}
    .actor-desc {font-size:10px; color:#8c5695; background:#fff6; border-radius:5px; padding:1px 4px;}
    #control-panel{
      margin:28px auto 0 auto;max-width:660px;padding:15px 15px 12px 15px;
      background:#f8fafc;border-radius:12px;box-shadow:0 0 12px #abc3dc21;
      min-height:54px;display:flex;flex-wrap:wrap;justify-content:center;
      gap:7px 15px;
    }
    .moveBtn, .actionBtn {
      background:#48aefa;border:none;color:#fff;
      font-size:15px;padding:7px 20px;margin:0 3px 7px 0;border-radius:7px;cursor:pointer;
      transition:background 0.13s; box-shadow:0 1px 4px #99cffa18;
    }
    .moveBtn:hover, .actionBtn:hover { background:#026ab0;}
    #eventBox {
      position: fixed;top:42%;left:50%;transform:translate(-50%,-50%);
      padding: 21px; background:#fff; border-radius: 12px; border: 2px solid #278ae6;
      box-shadow: 0 0 22px #046eb7a6; display:none; min-width: 265px; min-height:60px;
      z-index:4;
    }
    #questlog { margin:9px 0 0 0; font-size:14px; color:#305;}
    #player-name {font-size:20px; font-weight:500;}
    #restartBtn {padding:7px 26px;background:#59c265; color:#fff; border:none; border-radius:7px; font-size:16px; margin:0 0 0 20px;}
    #legendBtn {background:transparent;color:#2887ea; font-size:1em; border:none;}
    #descModal {
      display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;background:#0007;z-index:7;
      align-items:center;justify-content:center;
    }
    #descModalBox {
      max-width:600px;background:#fff;padding:25px 30px 20px 30px;border-radius:16px;box-shadow:0 0 24px #2229;
    }
    @media (max-width:816px) {
      #map {grid-template-columns:repeat(2,minmax(90px,1fr)); grid-template-rows:repeat(6,98px);}
      #main-wrap{margin-left:-9px;}
      #control-panel{min-width:97vw;}
    }
  </style>
</head>
<body>
  <div id="header">
    <span style="font-size:1.35em;">üöÄ –†–∞–±–æ—á–∏–π –¥–µ–Ω—å –≤ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∏</span>
  </div>
  <div id="top-bar">
    <span id="player-name">–ù–æ–≤–∏—á–æ–∫</span>
    <span id="stress">–°—Ç—Ä–µ—Å—Å: <span id="stressBar">0</span> / 100</span>
    <span id="inventory">–í —Ä—É–∫–∞—Ö: <span id="item">–ø—É—Å—Ç–æ</span></span>
    <button id="legendBtn" onclick="legendOpen()">?</button>
    <button id="restartBtn" onclick="resetGame()">–ó–∞–Ω–æ–≤–æ</button>
  </div>
  <div id="main-wrap">
    <div>
      <div id="map"></div>
      <div id="questlog"></div>
    </div>
  </div>
  <div id="control-panel"></div>
  <div id="eventBox">
    <div id="eventText"></div>
    <div id="eventOptions"></div>
  </div>
  <div id="descModal">
    <div id="descModalBox">
    <h3>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏ –∫–æ–º–Ω–∞—Ç—ã</h3>
    <div id="legendCont"></div><br>
    <button class="actionBtn" onclick="legendClose()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
  <script src="main.js"></script>
</body>
</html>
